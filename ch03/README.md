> 인프런의 강민철님의 [모두의 깃 깃허브](https://www.inflearn.com/course/%EB%AA%A8%EB%91%90%EC%9D%98-%EA%B9%83-%EA%B9%83%ED%97%88%EB%B8%8C/dashboard) 강의를 참조하였습니다.

## 브랜치란: 브랜치를 나누어 관리하는 이유

브랜치란 버전을 여러개의 흐름으로 관리하는 방법으로 버전의 분기를 뜻한다.

### 브랜치가 없다면?

- 서로의 작업과 전혀 관련없는 부분, 같은 코드를 다르게 수정한 부분이 혼재
- 일일이 수작업으로 합쳐야함.
- 때로는 서로의 코드를 합치다가 실수가 생김

### 브랜치로 문제 해결

- 브랜치는 버전의 분기
- 브랜치로 버전의 분기를 관리하는 방법
  - 브랜치로 나눈다.
  - 각자의 브랜치에서 작업한다.
  - 필요하면 나눈 브랜치를 합친다.

## 브랜치 나누기

### 브랜치 이름: 최초의 브랜치, master 브랜치

- 가장 기본적인 최초의 브랜치
- 기본적으로 커밋하면 mater 브랜치에 속한다.

### 특정 브랜치에서 작업하기: HEAD와 체크아웃

- HEAD
  - 현재 작업중인 브랜치의 커밋을 나타낸다.
  - 일반적으로 현재 작업중인 브랜치의 최신 커밋을 가리킨다.
  - 한마디로 내가 지금 어디에서 작업중인가를 가르킨다.
- 체크아웃
  - 특정 브랜치에서 작업할 수 있도록 작업환경을 바꾸는 것
  - HEAD의 위치를 특정 브랜치의 최신 커밋으로 옮김

> 🙋🏻 Q&A
> Q) 브랜치의 이름을 마음대로 지어두 될까?  
> A) 물론 마음대로 지어도 뭐라고 할 사람은 없다. 하지만 협업을 할때 그 브랜치를 왜 만들었는지 기억하고 만든 목적에 맞는 이름을 지어주는 것이 좋다.

## 브랜치 나누기 실습

소스트리에서 변경사항을 만들고 스테이지에 올린 후 커밋을 하는 것은 동일하다. 특정 버전에 브랜치를 나누고 싶으면 아래의 그림처럼 상단의 브랜치 버튼을 클릭후 이름을 지어주고 확인을 하면 해당 브랜치로 체크아웃이 된다.

![](https://velog.velcdn.com/images/bini/post/a425e7e7-2f23-4f8a-a4dd-1d6b3e0de0fa/image.png)

체크아웃을 하면 다음과 같이 브랜치가 foo로 변경이 된다.

![](https://velog.velcdn.com/images/bini/post/960172eb-da17-4f02-be40-22dd46835d9a/image.png)

여기서 foo브랜치에 변경사항을 저장 후 커밋을 하고 나면 아래와 같이 나오는데 여기서 master브랜치로 이동할려면 아래처럼 해당 master브랜치에 오른쪽 마우스를 클릭 후 체크아웃을 하면 된다. 그러면 foo브랜치에 변경된 사항들은 안 보일 것이다.

![](https://velog.velcdn.com/images/bini/post/cbca6ce2-0d95-46eb-9ec6-c2a4d2b7c0a0/image.png)

## 브랜치 합치기

브랜치를 합친다는 의미는 브랜치를 병합(merge)한다라고 한다.

예를들어 새로운 브랜치가 뻗어나오고 새로운 브랜치에 커밋이 쌓이고 병합되는 순간까지 master브랜치가 가만히 있는 상황은 master 브랜치는 마치 빨리감기하듯이 그저 새로운 브랜치에 추가된 커밋을 반영하기만 하면된다. 이러한 기법을 빨리감기병합이라고 한다.

만약 위의 예시와 다르게 새로운 브랜치도 커밋이 쌓이고 master 브랜치도 커밋이 생긴 상황에서 merge하면 master와 새로운 브랜치가 합쳐진 새로운 커밋이 생기는 상황도 생긴다.

## 브랜치 합치기 실습

merge하는 것은 간단하다. 브랜치를 생성후, 별도 커밋을 진행하고 master로 체크아웃 한 뒤, 합치고 싶은 브랜치의 오른쪽 버튼을 누른 뒤 현재 브랜치로 병합을 누르면 된다. 그러면 우리가 앞에서 본 빨리감기 병합과 아닌 병합을 아래의 그림처럼 실습해보았다.

![](https://velog.velcdn.com/images/bini/post/7656f65e-7cee-4221-9225-551551998835/image.png)

![](https://velog.velcdn.com/images/bini/post/730a61bf-592e-49a9-b5c8-5be4ceca90ee/image.png)

아래의 그림은 빨리감가 병합이 아닌 실습이다.

아래처럼 bar브랜치를 만들고 bar브랜치의 변경사항을 커밋하고 master브랜치도 변경사항을 커밋한 상태이다.

![](https://velog.velcdn.com/images/bini/post/c9663d09-b95b-4358-ae0e-3b9216dae856/image.png)

이제 master브랜치와 bar브랜치를 합쳐보자.

![](https://velog.velcdn.com/images/bini/post/8c14593e-7456-4493-87e2-a222d7eff327/image.png)

그러면 아래와 같이 새로운 커밋이 만들어진게 보일 것이다.

![](https://velog.velcdn.com/images/bini/post/371aa11f-bc88-43f7-b991-4e43017f6836/image.png)

## 충돌 해결하기

충돌이란, 병합하려는 두 브랜치가 서로 같은 내용을 다르게 수정한 상황에 발생한다. 해결법으로는 다음과 같다.

- 충돌을 해결한다. (어떤 브랜치의 내용을 반영할지 직접 선별한다.)
- 다시 커밋한다.

### 실습

이제 실습을 통해 해보자. 아래의 그림들처럼 브랜치를 생성하고 서로 같은 파일을 하고 병합하려 할때 소스트리에서 이런 문구를 제시해준다.

![](https://velog.velcdn.com/images/bini/post/684f7f0e-d414-4f36-862e-1a449c53024b/image.png)

여기서 확인을 누르고 파일을 보면 희한하게 되어 있을 것이다.

![](https://velog.velcdn.com/images/bini/post/8e4c3065-b425-4c24-ac4b-8338ead47521/image.png)

여기서 윗부분은 현재 브랜치(master)의 내용이고 아래는 다른 브랜치의 내용(foo)을 비교하기 쉽게 만들어준것이다. 실제 명령어로 수정할려면 이 파일을 손을 대야하지만 소스트리를 이용하면 쉽게 사용이 가능하다.

![](https://velog.velcdn.com/images/bini/post/8f173712-9caf-4302-9904-484ae1d5c94d/image.png)

위의 그림처럼 내것(master)로 할지 저장소(다른 브랜치)로 할지 버튼으로 결정해주면 된다. 그 후에, 커밋을 다시 해주면 된다. 커밋을 다시 해줄 때는 파일 상태 탭에 들어가서 하단의 메세지 커밋을 누르면 자동으로 메세지를 작성해준 것을 볼 수 있다. 그것을 보고 커밋 버튼을 눌러서 커밋을 진행하면 된다.

![](https://velog.velcdn.com/images/bini/post/c913c388-44c3-401d-b6c9-fc477d210b02/image.png)

## 브랜치 재배치 하기

재배치란, rebase라고 하며, 뻗어나온 브렌치의 베이스를 다시 조정하는 것을 말한다.

### 실습

일단 아래와 같이 만들어준다.

![](https://velog.velcdn.com/images/bini/post/feaacd6a-dfde-47ae-b7d1-8971609ce1bd/image.png)

여기서 다른 브렌치로 체크아웃 후, 이동할 버전에 오른쪽 마우스를 클릭하여 재배치를 누르면 된다.

![](https://velog.velcdn.com/images/bini/post/6b7fb69b-704b-4e21-833f-6424c42395d1/image.png)

![](https://velog.velcdn.com/images/bini/post/310a4019-52e6-4a4b-9444-72ce3bfef454/image.png)
